<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://eu.i.posthog.com https://cdn.jsdelivr.net https://eu-assets.i.posthog.com; img-src 'self' https://media.githubusercontent.com data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline';">
    <title>Cat Adoptable Gacha - Gold Gold Gold</title>
    <link rel="stylesheet" href="../assets/styles/pages/csgo-spinner.css">
    <!-- Beasty Profile Picture as Favicon -->
    <link id="favicon" rel="icon" type="image/png" href="../assets/images/beasty-favicon-rounded.png">
</head>
<body>
    <!-- Floating back button -->
    <a class="back-btn" href="../index.html">‚Üê Back</a>
    
    <div class="container">
        <!-- Multi-wheel selector -->
        <div class="spin-controls">
            <div class="wheel-selector">
                <span class="selector-label">Number of Pulls:</span>
                <div class="wheel-buttons">
                    <button class="wheel-button active" data-wheels="1">1</button>
                    <button class="wheel-button" data-wheels="3">3</button>
                    <button class="wheel-button" data-wheels="5">5</button>
                    <button class="wheel-button" data-wheels="10">10</button>
                </div>
            </div>
            <button id="spinButton" class="spin-button">SPIN</button>
        </div>
        
        <!-- CS:GO style horizontal spinner -->
        <div class="spinner-container" style="display: none;">
            <div class="spinner-indicator-line"></div>
            <div id="spinners-wrapper" class="spinners-wrapper">
                <!-- Individual spinners will be dynamically created here -->
            </div>
        </div>
        
        <!-- Results display -->
        <div id="results-container" class="results-container" style="display: none;">
            <h2>Your Cats:</h2>
            <div id="results-grid" class="results-grid">
                <!-- Results will be displayed here -->
            </div>
        </div>
        
        <!-- All generated cats display -->
        <div id="all-cats-container" class="all-cats-container" style="display: none;">
            <h3>All 24 Generated Cats (What Could Have Been):</h3>
            <div id="all-cats-grid" class="all-cats-grid">
                <!-- All 24 cats will be displayed here -->
            </div>
        </div>
        
        <!-- Rarity table -->
        <div class="rarity-info">
            <h3>Rarity Tiers</h3>
            <table class="rarity-table">
                <thead>
                    <tr>
                        <th>Rarity</th>
                        <th>Chance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="moondust">
                        <td>Moondust</td>
                        <td>40%</td>
                    </tr>
                    <tr class="starborn">
                        <td>Starborn</td>
                        <td>25%</td>
                    </tr>
                    <tr class="lunara">
                        <td>Lunara</td>
                        <td>15%</td>
                    </tr>
                    <tr class="celestara">
                        <td>Celestara</td>
                        <td>10%</td>
                    </tr>
                    <tr class="divinara">
                        <td>Divinara</td>
                        <td>6%</td>
                    </tr>
                    <tr class="holo-nova">
                        <td>Holo Nova</td>
                        <td>3%</td>
                    </tr>
                    <tr class="singularity">
                        <td>Singularity</td>
                        <td>1%</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Debug Controls -->
        <div class="debug-controls" style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
            <h3>Debug Controls</h3>
            <p style="color: #888; font-size: 0.9em;">Force next spin to be specific rarity:</p>
            <div class="debug-buttons" style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                <button onclick="window.forceRarity = 'Moondust'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Moondust';" style="background-color: #808080; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Force Moondust</button>
                <button onclick="window.forceRarity = 'Starborn'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Starborn';" style="background-color: #22c55e; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Force Starborn</button>
                <button onclick="window.forceRarity = 'Lunara'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Lunara';" style="background-color: #a855f7; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Force Lunara</button>
                <button onclick="window.forceRarity = 'Celestara'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Celestara';" style="background-color: #3b82f6; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Force Celestara</button>
                <button onclick="window.forceRarity = 'Divinara'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Divinara';" style="background-color: #f97316; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Force Divinara</button>
                <button onclick="window.forceRarity = 'Holo Nova'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Holo Nova';" style="background-color: #e0e7ff; padding: 8px 16px; border: none; border-radius: 5px; color: #333; cursor: pointer;">Force Holo Nova</button>
                <button onclick="window.forceRarity = 'Singularity'; document.getElementById('forceRarityStatus').textContent = 'Next spin forced to: Singularity';" style="background-color: #fbbf24; padding: 8px 16px; border: none; border-radius: 5px; color: #333; cursor: pointer;">Force Singularity</button>
                <button onclick="window.forceRarity = null; document.getElementById('forceRarityStatus').textContent = 'Force cleared';" style="background-color: #666; padding: 8px 16px; border: none; border-radius: 5px; color: white; cursor: pointer;">Clear Force</button>
            </div>
            <p id="forceRarityStatus" style="margin-top: 10px; color: #a855f7;"></p>
        </div>
        
        
        <!-- Cat details modal -->
        <div id="catModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="modalContent">
                    <!-- Cat details will be inserted here -->
                </div>
            </div>
        </div>
        
    </div>
    
    <!-- Add loading CSS -->
    <style>
        /* Cat slot styles */
        .cat-slot {
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 10px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .cat-slot.loading {
            background: rgba(168, 85, 247, 0.1);
        }
        
        .cat-slot.loaded {
            background: rgba(255, 255, 255, 0.1);
        }
        
        /* Cat paw loader */
        .cat-paw-loader {
            animation: spin 2s linear infinite;
            margin-bottom: 10px;
            width: 60px;
            height: 60px;
        }
        
        .cat-paw-loader img {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: #a855f7;
            font-size: 0.8em;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }
        
        /* Placeholder styles */
        .cat-item.placeholder {
            opacity: 0.3;
        }
        
        .cat-placeholder {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        /* All cats grid */
        .all-cats-container {
            margin-top: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        .all-cats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .all-cat-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .all-cat-item:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .all-cat-sprite {
            width: 100px;
            height: 100px;
            margin: 0 auto;
            image-rendering: pixelated;
        }
        
        .all-cat-name {
            font-size: 0.8em;
            color: #ccc;
            margin-top: 5px;
        }
    </style>
    
    <div id="legacySpinnerModal" class="spinner-modal" role="dialog" aria-modal="true" aria-labelledby="legacySpinnerTitle" hidden>
        <div class="spinner-modal__panel" role="document">
            <h2 id="legacySpinnerTitle">Legacy Spinner</h2>
            <p>This CS:GO style spinner is kept for nostalgia. For the newest experience, try the Single Cat Plus spinner instead.</p>
            <button id="legacySpinnerDismiss" class="spinner-modal__button">Got it</button>
        </div>
    </div>

    <!-- Load scripts -->
    <script type="module" src="../js/posthog-init.js"></script>
    <script type="module" src="../js/pages/csgo-spinner.js"></script>
    <script>
        // Copy to clipboard function
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback could be added here
            });
        }
    </script>
</body>
</html>
