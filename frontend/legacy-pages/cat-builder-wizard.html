<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://eu.i.posthog.com https://cdn.jsdelivr.net https://eu-assets.i.posthog.com; img-src 'self' https://media.githubusercontent.com data: blob:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;">
    <title>Cat Builder Guided Tour</title>
    <link rel="icon" type="image/png" href="../assets/images/beasty-favicon-rounded.png">
    <link rel="stylesheet" href="../assets/styles/pages/cat-builder-wizard.css">
</head>
<body class="wizard-page">
    <a class="back-btn" href="../index.html">‚Üê Back</a>

    <div class="bg"></div>
    <div class="blob blob-a"></div>
    <div class="blob blob-b"></div>
    <div class="blob blob-c"></div>

    <div class="wizard-layout">
        <aside class="wizard-sidebar">
            <header class="sidebar-header">
                <h1>Guided Cat Builder</h1>
                <p>Create the perfect sprite with a step-by-step tour.</p>
            </header>
            <div class="step-tree-wrapper" aria-label="Step navigation">
                <nav class="step-tree-nav" aria-label="Guided builder steps">
                    <ul id="stepTree" class="step-tree"></ul>
                </nav>
            </div>
            <footer class="sidebar-footer">
                <button id="resetWizard" class="ghost-btn">Start Over</button>
            </footer>
        </aside>

        <main class="wizard-main">
            <section class="preview-section">
                <div class="preview-card">
                    <canvas id="wizardCanvas" width="700" height="700"></canvas>
                </div>
                <div class="preview-actions">
                    <button id="downloadCat" class="primary-btn" disabled>Download Cat</button>
                    <button id="copyShareLink" class="soft-btn">Copy Timeline Link</button>
                </div>
            </section>

            <section class="step-section" aria-live="polite">
                <div class="step-meta">
                    <span id="stepIndex" class="step-pill">Step 1</span>
                    <h2 id="stepTitle">Pose &amp; Age</h2>
                    <p id="stepDescription">Pick a pose to begin.</p>
                </div>
                <div id="optionsContainer" class="options-container">
                    <!-- Options rendered here -->
                </div>
                <div class="step-footer">
                    <button id="prevStepBtn" class="ghost-btn">Back</button>
                    <div class="step-status" id="stepStatus">Make a choice to continue.</div>
                    <button id="nextStepBtn" class="primary-btn" disabled>Next Step</button>
                </div>
            </section>

        </main>
    </div>

    <div id="toast" class="toast" role="status">Copied!</div>

    <script type="module" src="../js/posthog-init.js"></script>
    <script type="module" src="../js/pages/cat-builder-wizard.js"></script>
</body>
</html>
